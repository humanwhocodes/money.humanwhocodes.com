---
import Layout from '../layouts/Layout.astro';
import PostBlurb from '../components/PostBlurb.astro';
import { loadBlogPosts, loadDataFile } from "../lib/util.js";

const site = await loadDataFile("config.yml");
const posts = (await loadBlogPosts(await Astro.glob('./_posts/**/*.md'))).reverse();

---
<Layout
	title={site.name}
	description={site.description}
>	
	<h2 class="no-margin">Recent Posts</h2>

	{posts.map((post) => (
		<PostBlurb
			title={post.frontmatter.title}
			teaser={post.frontmatter.teaser}
			date={post.frontmatter.date}
			url={post.url}
		/>
	))}


</Layout>
